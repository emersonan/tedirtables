!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Tedir={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var i=function(e){return"[object Object]"===Object.prototype.toString.call(e)},r=function(e){return Array.isArray(e)},o=function(e,t){return e.hasOwnProperty(t)},l=function e(t,n){for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a&&i(a)?(t[s]=t[s]||{},e(t[s],a)):t[s]=a}return t},c=function(e,t,n){var s;if(i(e))for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(n,e[s],s);else if(r(e))for(s=0;s<e.length;s++)t.call(n,e[s],s);else for(s=0;s<e;s++)t.call(n,s+1,s)},d=function(e,n){var s,a=document.createElement(e);if(n&&"object"==t(n))for(s in n)"html"===s?a.innerHTML=n[s]:s in a?a[s]=n[s]:a.setAttribute(s,n[s]);return a},h=function(e,t,n){return e.addEventListener(t,n,!1)},u=function(e){if(!!/(msie|trident)/i.test(navigator.userAgent))for(;e.hasChildNodes();)e.removeChild(e.lastChild);else e.innerHTML=""},f={add:function(e,t){"classList"in document.body?e.classList.add(t):f.contains(e,t)||(e.className=e.className.trim()+" "+t)},remove:function(e,t){"classList"in document.body?e.classList.remove(t):f.contains(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(e,t){return"classList"in document.body?e.classList.contains(t):!!e.className&&!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},toggle:function(e,t,n){t+="";var s=this.contains(e,t),a=s?!0!==n&&"remove":!1!==n&&"add";return a&&this[a](e,t),!0===n||!1===n?n:!s}},p={each:c,extend:l,isObject:i,classList:f,createElement:d},g=function(){function e(t,s){n(this,e),this.node=t,this.content=this.originalContent=t.innerHTML,this.hidden=!1,this.index=this.node.dataIndex=s,this.originalContent=this.content}return a(e,[{key:"setContent",value:function(e){this.content=this.node.innerHTML=e}}]),e}(),v=function e(t,s){n(this,e),r(t)?(this.node=d("tr"),c(t,(function(e,t){this.node.appendChild(d("td",{html:e}))}),this)):(this.node=t,void 0!==s&&(this.isHeader="THEAD"===t.parentNode.nodeName)),this.isHeader||void 0===s||(this.index=this.node.dataIndex=s-1),this.cells=[].slice.call(this.node.cells).map((function(e,t){return new g(e,t,this)}),this)},b=function(){function e(t,s,a){if(n(this,e),this.node=t,"string"==typeof t&&(this.node=document.querySelector(t)),s&&this.build(s),this.rows=[].slice.call(this.node.rows).map((function(e,t){return new v(e,t,this)}),this),this.body=this.node.tBodies[0],this.body||(this.body=d("tbody"),this.node.appendChild(this.body)),this.rows.length&&(this.rows[0].isHeader?(this.hasHeader=!0,this.header=this.rows[0],this.head=this.header.node.parentNode,this.rows.shift(),a.config.sortable&&c(this.header.cells,(function(e){f.add(e.node,a.config.classes.sorter)}))):this.addHeader()),a.config.header||this.head.removeChild(this.header.node),a.config.footer){this.hasFooter=!0,this.footer=new v(this.header.node.cloneNode(!0));var i=d("tfoot");i.appendChild(this.footer.node),c(this.footer.cells,(function(e){f.remove(e.node,a.config.classes.sorter)})),this.node.insertBefore(i,this.body)}}return a(e,[{key:"build",value:function(e){var t=!1,n=!1;if(e.headings){t=d("thead");var s=d("tr");c(e.headings,(function(e){var t=d("th",{html:e});s.appendChild(t)})),t.appendChild(s)}e.data&&e.data.length&&(n=d("tbody"),c(e.data,(function(e){var t=d("tr");c(e,(function(e){var n=d("td",{html:e});t.appendChild(n)})),n.appendChild(t)}))),t&&(null!==this.node.tHead&&this.node.removeChild(this.node.tHead),this.node.appendChild(t)),n&&(this.node.tBodies.length&&this.node.removeChild(this.node.tBodies[0]),this.node.appendChild(n))}},{key:"addHeader",value:function(){var e=d("thead"),t=d("tr");c(this.rows[0].cells,(function(e){t.appendChild(d("td"))})),e.appendChild(t),this.head=e,this.header=new v(t,1),this.hasHeader=!0}},{key:"addRow",value:function(e,t,n){if(e instanceof v)return this.rows.splice(t||0,0,e),this.hasHeader||this.addHeader(),n&&this.update(),e}},{key:"removeRow",value:function(e,t){e instanceof v&&(this.rows.splice(this.rows.indexOf(e),1),t&&this.update())}},{key:"update",value:function(e){c(this.rows,(function(e,t){e.index=e.node.dataIndex=t}))}}]),e}(),m=function(){function e(t,s){n(this,e),this.instance=t,this.parent=s}return a(e,[{key:"render",value:function(e){var t=this.instance,n=t.config;if(e=e||t.totalPages,u(this.parent),e>1){var s=d("ul"),a=t.onFirstPage?1:t.currentPage-1,i=t.onlastPage?e:t.currentPage+1;n.firstLast&&s.appendChild(this.button(n.classes.paginationItem,1,n.firstText)),n.nextPrev&&s.appendChild(this.button(n.classes.paginationItem,a,n.prevText));var r=this.truncate();c(r,(function(e){s.appendChild(e)})),n.nextPrev&&s.appendChild(this.button(n.classes.paginationItem,i,n.nextText)),n.firstLast&&s.appendChild(this.button(n.classes.paginationItem,e,n.lastText)),s.classList.add(n.classes.paginationList),this.parent.appendChild(s)}}},{key:"truncate",value:function(){var e,t=this,n=t.instance.config,s=2*n.pagerDelta,a=t.instance.currentPage,i=a-n.pagerDelta,r=a+n.pagerDelta,o=t.instance.totalPages,l=[],d=[];if(n.truncatePager){a<4-n.pagerDelta+s?r=3+s:a>o-(3-n.pagerDelta+s)&&(i=o-(2+s));for(var h=1;h<=o;h++)(1==h||h==o||h>=i&&h<=r)&&l.push(h);c(l,(function(s){e&&(s-e==2?d.push(t.button(n.classes.paginationItem,e+1,e+1)):s-e!=1&&d.push(t.button(n.classes.ellipsis,0,n.ellipsisText,!0))),d.push(t.button(s==a?n.classes.paginationItem+" active":n.classes.paginationItem,s,s)),e=s}))}else c(o,(function(e){d.push(t.button(e==a?n.classes.paginationItem+" active":n.classes.paginationItem,e,e))}));return d}},{key:"button",value:function(e,t,n,s){return d("li",{class:e,html:s?"<span>"+n+"</span>":'<a href="#" class="'+this.instance.config.classes.paginationLink+'" data-page="'+t+'">'+n+"</a>"})}}]),e}(),y=function(){function e(t,s){n(this,e),this.instance=t,void 0!==s?isNaN(s)?r(s)&&(this.select=s):this.select=[s]:this.select=t.table.header.cells.map((function(e){return e.index}))}return a(e,[{key:"init",value:function(){}},{key:"count",value:function(){return this.instance.table.header.cells.length}},{key:"sort",value:function(e,t){var n=this.instance;if(e=e||0,t=t||(t=n.lastDirection&&"asc"===n.lastDirection?"desc":"asc"),e<0||e>n.table.header.cells.length-1)return!1;var s,a,i=n.table.header.cells[e].node,r=n.table.rows;n.searching&&n.searchData&&(r=n.searchData),n.lastHeading&&f.remove(n.lastHeading,n.lastDirection),n.lastDirection&&f.remove(i,n.lastDirection),f.add(i,t),i.hasAttribute("data-type")&&"date"===i.getAttribute("data-type")&&(s=!1,(a=i.hasAttribute("data-format"))&&(s=i.getAttribute("data-format"))),r.sort((function(n,i){var r=n.cells[e].content,o=i.cells[e].content;return a?(r=parseDate(r,s,n.cells[e],n),o=parseDate(o,s,i.cells[e],i)):(r=r.replace(/(\$|\,|\s|%)/g,""),o=o.replace(/(\$|\,|\s|%)/g,"")),r=isNaN(r)?r:parseInt(r,10),o=isNaN(o)?o:parseInt(o,10),"asc"===t?r>o:r<o})),n.table.update(),n.update(),n.lastHeading=i,n.lastDirection=t,n.emit("columns.sort",t,e,i),f.remove(i,"loading")}},{key:"search",value:function(e,t){this.instance.search(t,e)}},{key:"order",value:function(e){var t=this.instance;if(r(e)){for(var n=0;n<e.length;n++)if(e[n]>=t.columns().count())throw new Error("Column index "+e[n]+" is outside the range of columns.");var s=function(t){var n=[];c(e,(function(e,s){n[s]=t.cells[e],n[s].index=n[s].node.dataIndex=s,t.node.appendChild(n[s].node)})),t.cells=n};t.table.hasHeader&&s(t.table.header),t.table.hasFooter&&s(t.table.footer),c(t.table.rows,(function(e){s(e)})),t.update(),t.emit("columns.order",e)}}},{key:"hide",value:function(){var e=this.instance,t=e.table.header,n=e.table.rows;c(this.select,(function(e){c(t.cells,(function(t){e==t.index&&(t.hidden=!0)})),c(n,(function(t){c(t.cells,(function(t){e==t.index&&(t.hidden=!0)}))}))})),this.fix(!0),e.update(),e.emit("columns.hide",this.select)}},{key:"show",value:function(){var e=this.instance,t=e.table.header,n=e.table.rows;c(this.select,(function(e){c(t.cells,(function(t){e==t.index&&(t.hidden=!1)})),c(n,(function(t){c(t.cells,(function(t){e==t.index&&(t.hidden=!1)}))}))})),this.fix(!0),e.update(),e.emit("columns.show",this.select)}},{key:"visible",value:function(){var e=this.instance.table.header,t=[];return c(this.select,(function(n){t.push(!e.cells[n].hidden)})),t}},{key:"add",value:function(e){var t=this.instance;if(isObject(e)){var n;if(isset(e,"heading"))(n=new g(d("th"),t.columns().count())).setContent(e.heading),t.table.header.node.appendChild(n.node),t.table.header.cells.push(n);if(isset(e,"data")&&r(e.data)&&c(t.table.rows,(function(t,n){var s=new g(d("td"),t.cells.length);s.setContent(e.data[n]||""),t.node.appendChild(s.node),t.cells.push(s)})),isset(e,"preheading"))(n=new g(d("th"),t.columns().count())).setContent(e.preheading),t.table.header.node.insertBefore(n.node,t.table.header.node.firstChild),t.table.header.cells.unshift(n);isset(e,"predata")&&r(e.predata)&&c(t.table.rows,(function(t,n){var s=new g(d("td"),t.cells.length);s.setContent(e.predata[n]||""),t.node.insertBefore(s.node,t.node.firstChild),t.cells.unshift(s)}))}this.fix(!0),t.update(),t.emit("columns.add")}},{key:"remove",value:function(e,t){var n=this.instance,s=n.table,a=s.header;if(r(e))return e.sort((function(e,t){return t-e})),void c(e,(function(t,n){this.remove(t,n<e.length-1)}),this);a.node.removeChild(a.cells[e].node),a.cells.splice(e,1),c(s.rows,(function(t){t.node.removeChild(t.cells[e].node),t.cells.splice(e,1)})),t||(c(a.cells,(function(e,t){e.index=e.node.dataIndex=t})),c(s.rows,(function(e){c(e.cells,(function(e,t){e.index=e.node.dataIndex=t}))})),this.fix(!0),n.update()),n.emit("columns.remove",e)}},{key:"fix",value:function(e){var t=this.instance,n=t.table,s=n.header;e&&n.hasHeader&&t.config.fixedColumns&&(t.columnWidths=s.cells.map((function(e){return e.node.offsetWidth}))),c(t.columnWidths,(function(e,n){s.cells[n].node.style.width=e/t.rect.width*100+"%"}))}},{key:"cells",value:function(){var e=this,t=[];return 1==this.select.length&&(this.select=this.select[0]),c(this.instance.table.rows,(function(n,s){r(e.select)&&(t[s]=[]),c(n.cells,(function(n){r(e.select)&&e.select.indexOf(n.index)>=0?t[s].push(n):e.select==n.index&&t.push(n)}))})),t}}]),e}(),w=function(){function e(t,s){n(this,e),this.instance=t,void 0!==s?isNaN(s)?r(s)&&(this.select=s):this.select=[s]:this.select=t.table.rows.map((function(e){return e.index}))}return a(e,[{key:"init",value:function(){}},{key:"count",value:function(){return this.instance.table.rows.length}},{key:"render",value:function(e){var t=this.instance;if(e=e||t.currentPage,u(t.table.body),!(e<1||e>t.totalPages)){var n=t.table.header,s=document.createDocumentFragment();t.table.hasHeader&&(u(n.node),c(n.cells,(function(e){e.hidden||n.node.appendChild(e.node)}))),t.pages.length&&c(t.pages[e-1],(function(e){u(e.node),c(e.cells,(function(t){t.hidden||e.node.appendChild(t.node)})),s.append(e.node)})),t.table.body.appendChild(s),c(t.pagers,(function(e){e.render()})),t.getInfo(),1==t.currentPage&&t.fixHeight(),t.emit("rows.render")}}},{key:"paginate",value:function(){var e=this.instance.config,t=this.instance.table.rows,n=this.instance;n.searching&&n.searchData&&(t=n.searchData),n.pages=t.map((function(n,s){return s%e.perPage==0?t.slice(s,s+e.perPage):null})).filter((function(e){return e})),n.totalPages=n.pages.length,n.currentPage>n.totalPages&&(n.currentPage=n.totalPages)}},{key:"add",value:function(e,t){if(r(e))return t=t||0,r(e[0])?(c(e,(function(e){e=this.instance.table.addRow(new v(e,this.instance.columns().count()+1),t)}),this),this.instance.table.update()):e=this.instance.table.addRow(new v(e,this.instance.columns().count()+1),t,!0),this.instance.update(),e}},{key:"remove",value:function(e){var t=!1,n=this.instance;if(r(e)){for(var s=e.length-1;s>=0;s--)n.table.removeRow(this.get(e[s]));n.table.update(),n.update()}else if(t=this.get(e))return n.table.removeRow(t,!0),n.update(),t}},{key:"cells",value:function(){var e=this,t=[];return 1==this.select.length&&(this.select=this.select[0]),c(this.instance.table.rows,(function(n){(r(e.select)&&e.select.indexOf(n.index)>=0||e.select==n.index)&&t.push(n.cells)})),t}},{key:"get",value:function(e){var t=this.instance.table.rows;if(e instanceof v||e instanceof Element){for(var n=0;n<t.length;n++)if(t[n].node===e||t[n]===e){e=t[n];break}}else e=t[e];return e}}]),e}(),x={perPage:10,perPageSelect:[5,10,15,20,25],sortable:!0,searchable:!0,nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",truncatePager:!0,pagerDelta:2,fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,search:{includeHiddenColumns:!1},toolbar:null,statusbar:null,classes:{topbar:"topbar",bottombar:"bottombar",grid:"d-flex justify-content-between my-2",info:"tedirtable-info",input:"tedirtable-input",table:"tedirtable-table",search:"tedirtable-search",sorter:"tedirtable-sorter",wrapper:"tedirtable-wrapper",dropdown:"tedirtable-dropdown",ellipsis:"tedirtable-ellipsis",selector:"tedirtable-selector",selectLabel:"tedirtable-select-label",container:"tedirtable-container",pagination:"pager",paginationList:"pagination",paginationItem:"page-item",paginationLink:"page-link"},labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{topLeft:"{select}",topRight:"{search}",bottomLeft:"{info}",bottomRight:"{pager}"}},C=function(){function e(t,s){if(n(this,e),console.log("version 0.0.1-development-1"),this.config=l(x,s),this.config.ajax){var a=this,i=this.config.ajax;this.request=new XMLHttpRequest,h(this.request,"load",(function(e){if(4===a.request.readyState&&200===a.request.status){var n={};n.data=i.load?i.load.call(a,a.request):a.request.responseText,n.type="json",i.content&&i.content.type&&(n.type=i.content.type,n=l(n,i.content)),a.table=new b(t,n.data,a),a.init()}})),this.request.open("GET","string"==typeof i?a.config.ajax:a.config.ajax.url),this.request.send()}else this.config.data?this.table=new b(t,this.config.data,this):this.table=new b(t,!1,this),this.init()}return a(e,[{key:"init",value:function(){if(!this.initialised){var e=this,t=e.config;if(e.sortable=t.sortable,e.searchable=t.searchable,e.currentPage=1,e.onFirstPage=!0,e.onLastPage=!1,e.rows().paginate(),e.totalPages=e.pages.length,e.render(),t.fixedColumns&&e.columns().fix(),e.extend(),t.plugins&&c(t.plugins,(function(t,n){void 0!==e[n]&&"function"==typeof e[n]&&(e[n]=e[n](e,t,p),t.enabled&&e[n].init&&"function"==typeof e[n].init&&e[n].init())})),t.columns){var n=[],s=[];c(t.columns,(function(a){r(a.select)||(a.select=[a.select]),o(a,"render")&&"function"==typeof a.render&&(n=n.concat(a.select),s.push({columns:a.select,renderer:a.render})),e.table.hasHeader&&c(a.select,(function(n){var s=e.table.header.cells[n];a.type&&s.node.setAttribute("data-type",a.type),a.format&&s.node.setAttribute("data-format",a.format),o(a,"sortable")&&(s.node.setAttribute("data-sortable",a.sortable),!1===a.sortable&&f.remove(s.node,t.classes.sorter)),o(a,"hidden")&&!1!==a.hidden&&e.columns().hide(n),o(a,"sort")&&1===a.select.length&&e.columns().sort(a.select[0],a.sort)}))})),n.length&&c(e.table.rows,(function(t){c(t.cells,(function(a){n.indexOf(a.index)>=0&&c(s,(function(n){n.columns.indexOf(a.index)>=0&&a.setContent(n.renderer.call(e,a.content,a,t))}))}))}))}e.rows().render(),e.bindEvents(),e.setClasses(),e.initialised=!0,setTimeout((function(){e.emit("init")}),10)}}},{key:"setClasses",value:function(){f.toggle(this.wrapper,"tedirtable-sortable",this.sortable),f.toggle(this.wrapper,"tedirtable-searchable",this.searchable)}},{key:"extend",value:function(){var e=this;e.config.plugins&&c(e.config.plugins,(function(t){void 0!==e[t]&&"function"==typeof e[t]&&(e[t]=e[t](e,e.config[t],p),e[t].init&&"function"==typeof e[t].init&&e[t].init())}))}},{key:"bindEvents",value:function(){var e=this,t=e.config;h(e.wrapper,"mousedown",(function(t){1===t.which&&e.sortable&&"TH"===t.target.nodeName&&f.add(t.target,"loading")})),h(e.wrapper,"click",(function(n){var s=n.target;if(s.hasAttribute("data-page")&&(n.preventDefault(),e.page(parseInt(s.getAttribute("data-page"),10))),e.sortable&&"TH"===s.nodeName&&f.contains(s,t.classes.sorter)){if(s.hasAttribute("data-sortable")&&"false"===s.getAttribute("data-sortable"))return!1;n.preventDefault(),e.columns().sort(s.dataIndex,f.contains(s,"asc")?"desc":"asc")}})),t.perPageSelect&&h(e.wrapper,"change",(function(n){var s=n.target;"SELECT"===s.nodeName&&f.contains(s,t.classes.selector)&&(n.preventDefault(),e.setPerPage(s.value))})),e.searchable&&h(e.wrapper,"keyup",(function(n){"INPUT"===n.target.nodeName&&f.contains(n.target,t.classes.input)&&(n.preventDefault(),e.search(n.target.value))})),e.sortable&&h(e.wrapper,"mousedown",(function(e){"TH"===e.target.nodeName&&e.preventDefault()}))}},{key:"render",value:function(){if(!this.rendered){var e=this,t=e.config;this.table.hasHeader&&t.fixedColumns&&t.header&&(this.columnWidths=this.table.header.cells.map((function(e){return e.node.offsetWidth}))),e.wrapper=d("div",{class:t.classes.wrapper});var n=["<div class='",t.classes.topbar," ",t.classes.grid,"'>",t.layout.topLeft,t.layout.topRight,"</div>","<div class='",t.classes.container,"'></div>","<div class='",t.classes.bottombar," ",t.classes.grid,"'>",t.layout.bottomLeft,t.layout.bottomRight,"</div>"].join("");if(null!=t.toolbar&&(n=n.replace("{toolbar}",document.querySelector(t.toolbar).outerHTML)),null!=t.statusbar&&(n=n.replace("{statusbar}",document.querySelector(t.statusbar).outerHTML)),n=n.replace("{info}","<div class='"+t.classes.info+"'></div>"),t.perPageSelect){var s=["<div class='",t.classes.dropdown,"'>","<label class='",t.classes.selectLabel,"'>",t.labels.perPage,"</label>","</div>"].join(""),a=d("select",{class:t.classes.selector});c(t.perPageSelect,(function(e){var n=e===t.perPage,s=new Option(e,e,n,n);a.add(s)})),s=s.replace("{select}",a.outerHTML),n=n.replace(/\{select\}/g,s)}else n=n.replace(/\{select\}/g,"");if(e.searchable){var i=["<div class='",t.classes.search,"'>","<input class='",t.classes.input,"' placeholder='",t.labels.placeholder,"' type='text'>","</div>"].join("");n=n.replace(/\{search\}/g,i)}else n=n.replace(/\{search\}/g,"");e.table.node.classList.add(t.classes.table),c(n.match(/\{pager\}/g),(function(e,s){n=n.replace("{pager}",d("div",{class:t.classes.pagination}).outerHTML)})),e.wrapper.innerHTML=n,e.pagers=[].slice.call(e.wrapper.querySelectorAll("."+t.classes.pagination)),c(e.pagers,(function(t,n){e.pagers[n]=new m(e,t)})),e.container=e.wrapper.querySelector("."+t.classes.container),e.labels=e.wrapper.querySelectorAll("."+t.classes.info),e.inputs=e.wrapper.querySelectorAll("."+t.classes.input),e.selectors=e.wrapper.querySelectorAll("."+t.classes.selector),e.table.node.parentNode.replaceChild(e.wrapper,e.table.node),e.container.appendChild(e.table.node),e.rect=e.table.node.getBoundingClientRect(),e.rendered=!0}}},{key:"update",value:function(){this.rows().paginate(),this.rows().render(),this.emit("update")}},{key:"fixHeight",value:function(){this.container.style.height=null,0!=this.config.fixedHeight&&(this.rect=this.container.getBoundingClientRect(),this.container.style.height=this.rect.height+"px")}},{key:"getInfo",value:function(){var e,t=0,n=0,s=0;if(this.totalPages&&(s=(n=(t=this.currentPage-1)*this.config.perPage)+this.pages[t].length,n+=1,e=this.searching?this.searchData.length:this.rows().count()),this.labels.length&&this.config.labels.info.length){var a=this.config.labels.info.replace("{start}",n).replace("{end}",s).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",e);c([].slice.call(this.labels),(function(t){t.innerHTML=e?a:""}))}}},{key:"search",value:function(e,t){var n=this;if(e=e.toLowerCase(),n.currentPage=1,n.searching=!0,n.searchData=[],!e.length)return n.searching=!1,f.remove(n.wrapper,"search-results"),n.update(),!1;c(n.table.rows,(function(s){var a=n.searchData.indexOf(s)>=0;void 0!==t?c(s.cells,(function(i){void 0===t||i.index!=t||a||i.content.toLowerCase().indexOf(e)>=0&&n.searchData.push(s)})):e.split(" ").reduce((function(e,t){for(var a=!1,i=0;i<s.cells.length;i++)if(s.cells[i].content.toLowerCase().indexOf(t)>=0){(!s.cells[i].hidden||s.cells[i].hidden&&n.config.search.includeHiddenColumns)&&(a=!0);break}return e&&a}),!0)&&!a&&n.searchData.push(s)})),f.add(n.wrapper,"search-results"),n.searchData.length?n.update():(f.remove(n.wrapper,"search-results"),n.setMessage(n.config.labels.noRows)),this.emit("search",e,this.searchData)}},{key:"page",value:function(e){return e!=this.currentPage&&(isNaN(e)||(this.currentPage=parseInt(e,10)),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.totalPages,!(e>this.totalPages||e<0)&&(this.rows().render(parseInt(e,10)),void this.emit("page",e)))}},{key:"reset",value:function(){this.searching&&(this.searching=this.searchData=!1,f.remove(this.wrapper,"search-results")),c([].slice.call(this.inputs),(function(e){e.value=null,e.blur()})),this.update(),this.emit("reset")}},{key:"set",value:function(e,t){this.hasOwnProperty(e)&&(this[e]=t,f.toggle(this.wrapper,"tedirtable-"+e,this[e]),this.update())}},{key:"setPerPage",value:function(e){isNaN(e)||(e=parseInt(e,10),this.config.perPage=e,this.fixHeight(),this.config.perPageSelect.indexOf(e)>=0&&c([].slice.call(this.selectors),(function(t){t.value=e})),this.update(),this.emit("perpage",e))}},{key:"import",value:function(e){var t=this,n=!1;if(!i(e))return!1;if((e=l({lineDelimiter:"\n",columnDelimiter:","},e)).data.length||i(e.data)){if("csv"===e.type){n={data:[]};var s=e.data.split(e.lineDelimiter);s.length&&(e.headings&&(n.headings=s[0].split(e.columnDelimiter),s.shift()),c(s,(function(t,s){n.data[s]=[];var a=t.split(e.columnDelimiter);a.length&&c(a,(function(e){n.data[s].push(e)}))})))}else if("json"===e.type){var a=function(e){var t=!1;try{t=JSON.parse(e)}catch(e){return!1}return!(null===t||!r(t)&&!i(t))&&t}(e.data);if(!a)throw new Error("That's not valid JSON!");n={headings:[],data:[]},c(a,(function(e,t){n.data[t]=[],c(e,(function(e,s){n.headings.indexOf(s)<0&&n.headings.push(s),n.data[t].push(e)}))}))}i(e.data)&&(n=e.data),n&&(c(n.headings,(function(e,n){t.table.header.cells[n].setContent(e)})),this.rows().add(n.data))}return!1}},{key:"setMessage",value:function(e){var t=1;this.rows().count()&&(t=this.columns().count());var n=d("tr",{html:'<td class="tedirtable-empty" colspan="'+t+'">'+e+"</td>"});u(this.table.body),this.table.body.appendChild(n)}},{key:"columns",value:function(e){return new y(this,e)}},{key:"rows",value:function(e){return new w(this,e)}},{key:"on",value:function(e,t){this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"off",value:function(e,t){this.events=this.events||{},e in this.events!=!1&&this.events[e].splice(this.events[e].indexOf(t),1)}},{key:"emit",value:function(e){if(this.events=this.events||{},e in this.events!=!1)for(var t=0;t<this.events[e].length;t++)this.events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},{key:"destroy",value:function(){var e=this,t=e.config,n=e.table;f.remove(n.node,t.classes.table),c(n.header.cells,(function(e){e.node.style.width="",f.remove(e.node,t.classes.sorter)}));var s=document.createDocumentFragment();u(n.body),c(n.rows,(function(e){s.appendChild(e.node)})),n.body.appendChild(s),this.wrapper.parentNode.replaceChild(n.node,this.wrapper),this.rendered=!1,this.initialised=!1,this.config.plugins&&c(this.config.plugins,(function(t){void 0!==e[t]&&"function"==typeof e[t]&&e[t].destroy&&"function"==typeof e[t].destroy&&e[t].destroy()}))}}]),e}();e.DataTable=C,Object.defineProperty(e,"__esModule",{value:!0})}));
